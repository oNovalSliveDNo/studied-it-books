# Законсервируем
# Демонстрирует консервацию данных и доступ к ним через интерфейс полки

import pickle, shelve

print("Консервация списков.")
# Создаем несколько списков, которые будем сохранять в файл
variety = ["огурцы", "помидоры", "капуста"]
shape = ["целые", "кубиками", "соломкой"]
brand = ["Главпродукт", "Чумак", "Бондюзль"]

# Открываем файл для записи данных в бинарном режиме (wb)
f = open("pickles1.dat", "wb")

# Сохраняем данные в файл с помощью pickle
# Сначала записываем список variety
pickle.dump(variety, f)
# Затем записываем список shape
pickle.dump(shape, f)
# И наконец записываем список brand
pickle.dump(brand, f)

# Закрываем файл после записи
f.close()

print("\nРасконсервация списков.")
# Открываем файл для чтения данных в бинарном режиме (rb)
f = open("pickles1.dat", "rb")

# Загружаем сохраненные данные из файла
# Сначала загружаем список variety
variety = pickle.load(f)
# Затем загружаем список shape
shape = pickle.load(f)
# И наконец загружаем список brand
brand = pickle.load(f)

# Выводим содержимое загруженных списков
print(variety)
print(shape)
print(brand)

# Закрываем файл после чтения
f.close()

print("\nПомещение списков на полку.")
# Открываем полку для хранения данных (полка — это база данных, доступная через Python)
s = shelve.open("pickles2.dat")

# Записываем списки на полку, ключами будут строки ("variety", "shape", "brand")
s["variety"] = ["огурцы", "помидоры", "капуста"]
s["shape"] = ["целые", "кубиками", "соломкой"]
s["brand"] = ["Главпродукт", "Чумак", "Бондюзль"]

# Синхронизируем полку, чтобы убедиться, что данные записаны
s.sync()

print("\nИзвлечение списков из файла полки:")
# Извлекаем данные из полки и выводим их
print("торговые марки -", s["brand"])
print("фopмы -", s["shape"])
print("виды овощей -", s["variety"])

# Закрываем полку
s.close()

# Ожидаем от пользователя нажатия Enter перед выходом
input("\n\nHaжмитe Enter, чтобы выйти.")
